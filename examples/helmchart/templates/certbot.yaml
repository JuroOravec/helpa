# Autogenerated by Helpa HelmChartSerializer on 2024-02-28T19:50:29+01:00
apiVersion: batch/v1
kind: CronJob
metadata:
  name: certbot-cronjob-5c8811
  namespace: certbot
spec:
  jobTemplate:
    metadata:
    spec:
      template:
        metadata:
        spec:
          containers:
          - command:
            - /bin/sh
            - -c
            - certbot certonly --email  -d "example.com" -d "*.example.com" && cd
              /etc/letsencrypt/live/example.com && kubectl delete secret certbot-tls-secret
              -n default || true && kubectl create secret tls certbot-tls-secret -n
              default --cert=fullchain.pem --key=privkey.pem
            image: certbot/certbot
            imagePullPolicy: Always
            name: certbot
            resources: {}
          restartPolicy: OnFailure
          serviceAccountName: certbot-account
  schedule: 20 3 * * */6
status: {}

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: certbot-account
  namespace: certbot

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: certbot-role
rules:
- resources:
  - secrets
  verbs:
  - create
  - delete

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: certbot-role-binding-default
  namespace: default
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: certbot-role
subjects:
- kind: ServiceAccount
  name: certbot-account
  namespace: certbot
